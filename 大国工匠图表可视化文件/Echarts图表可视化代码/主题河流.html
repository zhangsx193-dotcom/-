<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>大国工匠精神品质 - ThemeRiver（含图例）</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
    <style>
        html,body{margin:0;padding:0;height:100%}
        #main{width:100%;height:100%}
    </style>
</head>
<body>
    <div id="main"></div>
<script>
/* ---------------- 数据区（同上） ---------------- */
const rawData = [
[1,'敬业坚守',0.8],[1,'创新突破',3.7],
[2,'责任担当',1.0],[2,'团队协作',0.9],[2,'极限环境',2.0],
[3,'精益求精',1.0],[3,'敬业坚守',0.9],[3,'毫厘之功',1.0],
[4,'精雕细刻',1.7],
[5,'敬业坚守',1.8],[5,'专注执着',0.8],
[7,'敬业坚守',0.8],
[8,'敬业坚守',0.8],[8,'专注执着',0.9],
[9,'精益求精',1.0],[9,'创新突破',1.8],[9,'毫厘之功',1.0],[9,'千锤百炼',0.8],[9,'火眼金睛',1.0],
[10,'毫厘之功',1.0],
[11,'千锤百炼',0.9],
[12,'创新突破',1.7],[12,'责任担当',1.0],[12,'毫厘之功',1.0],[12,'精雕细刻',0.9],[12,'数字智造',0.9],[12,'生活细微',0.9],
[13,'专注执着',0.8],[13,'数字智造',1.0],
[14,'毫厘之功',1.8],[14,'精雕细刻',0.9],[14,'数字智造',0.9],
[15,'专注执着',0.8],
[16,'责任担当',0.9],[16,'专注执着',0.8],[16,'团队协作',0.9],
[17,'专注执着',0.9],
[18,'勇挑重担',1.0],
[19,'毫厘之功',1.8],
[20,'创新突破',0.8],[20,'火眼金睛',1.0],
[21,'毫厘之功',0.9],[21,'千锤百炼',0.9],[21,'百万数据',1.8],
[23,'创新突破',1.8],[23,'专注执着',1.0],
[24,'敬业坚守',0.8],[24,'千锤百炼',1.0],
[25,'精益求精',1.0],[25,'专注执着',0.8],[25,'毫厘之功',1.0],
[26,'毫厘之功',0.8],[26,'特种材料',1.0],
[27,'精雕细刻',0.8],[27,'数字智造',0.9],[27,'世界巅峰',0.9],
[28,'责任担当',1.0],[28,'毫厘之功',1.0],[28,'千锤百炼',1.0],
[30,'责任担当',1.0],
[31,'责任担当',1.0],
[32,'传承育人',1.0],
[33,'责任担当',0.9],[33,'勇挑重担',2.0],[33,'极限环境',0.9],
[35,'责任担当',0.9],
[36,'极限环境',0.9],
[37,'传承育人',2.0],
[40,'敬业坚守',0.9],
[41,'创新突破',0.9],[41,'数字智造',0.8],
[43,'极限环境',0.9],
[44,'敬业坚守',1.8],[44,'责任担当',0.9],[44,'生活细微',0.9],
[45,'创新突破',0.9],[45,'千锤百炼',0.9],[45,'极限环境',1.8],
[48,'敬业坚守',0.9],[48,'责任担当',1.9],[48,'专注执着',0.8],[48,'勇挑重担',1.0],
[49,'精益求精',1.0],[49,'创新突破',0.8],[49,'勇挑重担',1.0],[49,'毫厘之功',1.0],
[50,'责任担当',0.9],[50,'专注执着',1.7],
[51,'安全底线',0.9],
[52,'专注执着',0.8],
[54,'世界巅峰',0.8],
[55,'千锤百炼',0.9],[55,'世界巅峰',1.7],
[57,'责任担当',1.0],[57,'专注执着',0.8],
[59,'精雕细刻',0.9],
[60,'创新突破',0.8],[60,'专注执着',1.0],
[61,'千锤百炼',0.9],
[62,'超级工程',1.0],
[64,'创新突破',1.0],
[66,'传承育人',1.0],[66,'精雕细刻',2.7],[66,'非遗传承',0.8],
[67,'非遗传承',0.9],[67,'文物复活',1.8],
[68,'千锤百炼',1.0],[68,'精雕细刻',0.8],
[69,'传承育人',1.0],[69,'毫厘之功',1.0],
[70,'专注执着',0.9],[70,'精雕细刻',1.8],[70,'世界巅峰',0.8],
[71,'责任担当',0.9],[71,'生活细微',0.9],
[72,'传承育人',1.0],[72,'文物复活',0.9],
[73,'传承育人',1.0],
[74,'非遗传承',0.8],[74,'文物复活',0.8],
[75,'毫厘之功',1.0],[75,'文物复活',1.6],
[77,'专注执着',2.0],
[78,'非遗传承',2.7],[78,'文物复活',0.8],
[79,'传承育人',1.0],[79,'精雕细刻',0.9],[79,'文物复活',0.9],
[80,'专注执着',0.8],[80,'传承育人',1.0],[80,'金耳朵',1.0],
[81,'精雕细刻',0.9],
[82,'专注执着',0.9],
[83,'千锤百炼',0.9],
[84,'创新突破',0.9],[84,'责任担当',0.9],[84,'传承育人',1.0],[84,'勇挑重担',0.9],
[85,'毫厘之功',0.9],
[86,'专注执着',0.9],[86,'勇挑重担',3.0],
[87,'创新突破',1.8],[87,'团队协作',0.9],[87,'勇挑重担',2.5]
];

/* -------------- 格式化 -------------- */
const data = rawData.map(d => [d[0], d[2], d[1]]);   // [person, value, dimension]
const dimensions = [...new Set(rawData.map(d => d[1]))].sort(); // 字母排序
const colorList = dimensions.map((_, i) => echarts.color.modifyHSL('#5A8BFA', i * 360 / dimensions.length));

/* -------------- ECharts 配置 -------------- */
const myChart = echarts.init(document.getElementById('main'));
const option = {
    title: {
        text: '大国工匠精神品质 - ThemeRiver',
        left: 'center',
        top: 10
    },
    tooltip: {
        trigger: 'item',
        formatter: p => {
            const [person, value, dim] = p.data;
            return `维度：${dim}<br/>人物区间：${person} → ${person+1}<br/>权重得分：${value}`;
        }
    },
   /* -------------- 仅替换 legend 配置 -------------- */
legend: {
    data: dimensions,
    orient: 'horizontal',        // 横向排列
    top: '8%',                   // 标题下方
    left: 'center',
    type: 'scroll',
    pageButtonItemGap: 5,
    pageButtonGap: 10,
    pageIcons: {
        horizontal: ['M0,0 L12,0 L12,10 L0,10 z', 'M0,0 L12,0 L12,10 L0,10 z']
    },
    formatter: dim => dim
},
    color: colorList,
    singleAxis: {
       type: 'category',
    data: [...new Set(data.map(d => d[0]))],
    top: 120,       // 比原来略下移，避免被图例遮挡
    bottom: 80,
    left: '5%',
    // right 恢复默认
    axisLabel: { interval: 4 }
    },
    series: [{
        type: 'themeRiver',
        data: data,
        label: { show: false }
    }]
};

myChart.setOption(option);
window.addEventListener('resize', () => myChart.resize());
</script>
</body>
</html>